<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Живые воспоминания</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #faf9f6;              /* фон области с фото/видео */
      --card: #ffffff;
      --text: #222222;
      --muted: #6b6f80;
      --accent-start: #667eea;
      --accent-end: #764ba2;
      --shadow: 0 12px 32px rgba(16, 24, 40, 0.08);
      --radius: 16px;
      --radius-sm: 12px;
      --gap: 24px;
      --maxw: 1200px;
      --ratio: 3 / 4;
    }
    body {
      margin: 0;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    header {
      background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
      color: #fff;
      text-align: center;
      padding: 64px 16px;
    }
    header h1 {
      margin: 0 0 12px;
      font-family: 'Playfair Display', serif;
      font-size: clamp(36px, 6vw, 56px);
    }
    header p {
      margin: 0;
      font-size: clamp(16px, 2.4vw, 22px);
    }
    main { max-width: var(--maxw); margin: 0 auto; padding: 36px 16px 56px; }
    .item {
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: var(--gap);
      overflow: hidden;
      transition: transform .2s ease, box-shadow .2s ease;
    }
    .item-inner {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--gap);
      padding: var(--gap);
      align-items: center;
    }
    @media (max-width: 820px) { .item-inner { grid-template-columns: 1fr; } }
    .panel { display: grid; gap: 12px; }
    .panel h3 { margin: 0; font-size: 15px; color: var(--accent-start); font-weight: 600; }
    .media {
      position: relative;
      border-radius: var(--radius-sm);
      overflow: hidden;
      box-shadow: var(--shadow);
      background: #000;
      cursor: zoom-in;
    }
    .media::before { content: ""; display: block; aspect-ratio: var(--ratio); }
    .media > * { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: contain; }
    /* Лайтбокс без слайдера */
    .overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 9999; }
    .overlay.visible { display: flex; }
    .overlay-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,.92); }
    .overlay-box { position: relative; width: min(96vw, 1200px); height: min(96vh, 90vh); display: grid; }
    .overlay-content { width: 100%; height: 100%; }
    .overlay-content img, .overlay-content video { width: 100%; height: 100%; object-fit: contain; background: #000; border-radius: var(--radius-sm); }
    .overlay-close {
      position: absolute; top: 8px; right: 8px; width: 40px; height: 40px;
      border-radius: 999px; border: none;
      background: linear-gradient(135deg, var(--accent-start), var(--accent-end));
      color: #fff; font-size: 22px; cursor: pointer; box-shadow: var(--shadow);
    }
    @media print {
      header { display: none !important; }
      .item { break-inside: avoid; box-shadow: none; border: 1px solid #ccc; }
      .media::before { aspect-ratio: auto; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Живые воспоминания</h1>
    <p>Как было и как стало</p>
  </header>

  <main>
    <!-- ПАРА 1 -->
    <article class="item">
      <div class="item-inner">
        <figure class="panel">
          <h3>До</h3>
          <div class="media">
            <img src="photos/before1.jpg" alt="Оригинал 1">
          </div>
        </figure>
        <figure class="panel">
          <h3>После</h3>
          <div class="media">
            <video preload="metadata" controls playsinline poster="photos/before1.jpg">
              <source src="videos/after1.mp4" type="video/mp4">
            </video>
          </div>
        </figure>
      </div>
    </article>

    <!-- ПАРА 2 -->
    <article class="item">
      <div class="item-inner">
        <figure class="panel">
          <h3>До</h3>
          <div class="media">
            <img src="photos/before2.jpg" alt="Оригинал 2">
          </div>
        </figure>
        <figure class="panel">
          <h3>После</h3>
          <div class="media">
            <video preload="metadata" controls playsinline poster="photos/before2.jpg">
              <source src="videos/after2.mp4" type="video/mp4">
            </video>
          </div>
        </figure>
      </div>
    </article>

    <!-- ПАРА 3 -->
    <article class="item">
      <div class="item-inner">
        <figure class="panel">
          <h3>До</h3>
          <div class="media">
            <img src="photos/before3.jpg" alt="Оригинал 3">
          </div>
        </figure>
        <figure class="panel">
          <h3>После</h3>
          <div class="media">
            <video preload="metadata" controls playsinline poster="photos/before3.jpg">
              <source src="videos/after3.mp4" type="video/mp4">
            </video>
          </div>
        </figure>
      </div>
    </article>
  </main>

  <!-- Лайтбокс -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="overlay-backdrop" data-close></div>
    <div class="overlay-box">
      <button class="overlay-close" type="button" aria-label="Закрыть" data-close>&times;</button>
      <div class="overlay-content" id="overlayContent"></div>
    </div>
  </div>

  <script>
    const overlay = document.getElementById('overlay');
    const overlayContent = document.getElementById('overlayContent');

    function openOverlayWith(node){
      overlayContent.innerHTML = '';
      const tag = node.tagName.toLowerCase();
      let el;
      if (tag === 'img') {
        el = document.createElement('img');
        el.src = node.currentSrc || node.src;
        el.alt = node.alt || 'Изображение';
      } else if (tag === 'video') {
        el = document.createElement('video');
        el.controls = true;
        el.autoplay = true;
        el.playsInline = true;
        const source = node.querySelector('source');
        const src = (source && source.src) || node.currentSrc || node.src;
        if (src) el.src = src;
        if (node.poster) el.poster = node.poster;
      }
      if (!el) return;
      overlayContent.appendChild(el);
      overlay.classList.add('visible');
      overlay.setAttribute('aria-hidden','false');
    }

    function closeOverlay(){
      overlay.classList.remove('visible');
      overlay.setAttribute('aria-hidden','true');
      overlayContent.innerHTML = '';
    }

    // Клик по медиа — открыть оверлей
    document.addEventListener('click', e => {
      const media = e.target.closest('.media img, .media video');
      if (media) { openOverlayWith(media); return; }
      if (e.target.closest('[data-close]')) { closeOverlay(); }
    });

    // ESC — закрыть
    window.addEventListener('keydown', e => { if (e.key === 'Escape') closeOverlay(); });
  </script>
</body>
</html>
